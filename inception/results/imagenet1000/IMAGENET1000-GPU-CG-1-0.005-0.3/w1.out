I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcublas.so locally
I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcudnn.so locally
I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcufft.so locally
I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcuda.so locally
I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUDA library libcurand.so locally
INFO:tensorflow:PS hosts are: ['master:2200']
INFO:tensorflow:Worker hosts are: ['master:2201', 'master:2202', 'master:2203', 'master:2204', 'node001:2205', 'node001:2206', 'node001:2207', 'node001:2208', 'node002:2209', 'node002:2210', 'node002:2211', 'node002:2212', 'node003:2213', 'node003:2214', 'node003:2215', 'node003:2216', 'node004:2217', 'node004:2218', 'node004:2219', 'node004:2220', 'node005:2221', 'node005:2222', 'node005:2223', 'node005:2224', 'node006:2225', 'node006:2226', 'node006:2227', 'node006:2228', 'node007:2229', 'node007:2230', 'node007:2231', 'node007:2232']
I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:922] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
I tensorflow/core/common_runtime/gpu/gpu_init.cc:102] Found device 0 with properties: 
name: GRID K520
major: 3 minor: 0 memoryClockRate (GHz) 0.797
pciBusID 0000:00:03.0
Total memory: 4.00GiB
Free memory: 3.95GiB
I tensorflow/core/common_runtime/gpu/gpu_init.cc:126] DMA: 0 
I tensorflow/core/common_runtime/gpu/gpu_init.cc:136] 0:   Y 
I tensorflow/core/common_runtime/gpu/gpu_device.cc:784] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GRID K520, pci bus id: 0000:00:03.0)
I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job ps -> {master:2200}
I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:206] Initialize HostPortsGrpcChannelCache for job worker -> {localhost:2201, master:2202, master:2203, master:2204, node001:2205, node001:2206, node001:2207, node001:2208, node002:2209, node002:2210, node002:2211, node002:2212, node003:2213, node003:2214, node003:2215, node003:2216, node004:2217, node004:2218, node004:2219, node004:2220, node005:2221, node005:2222, node005:2223, node005:2224, node006:2225, node006:2226, node006:2227, node006:2228, node007:2229, node007:2230, node007:2231, node007:2232}
I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:202] Started server with target: grpc://localhost:2201
INFO:tensorflow:Learning rate: 0.005000, momentum: 0.300000
INFO:tensorflow:Sync mode!!!!!!
INFO:tensorflow:Compute groups : 1
INFO:tensorflow:SyncReplicas enabled: replicas_to_aggregate=32; total_num_replicas=32
INFO:tensorflow:Num nodes per compute groups: 32
INFO:tensorflow:Tokens per step: 32
INFO:tensorflow:2016-08-10 09:43:10.896362 Supervisor
INFO:tensorflow:Restored model from /imagenet/snapshot/model.ckpt-7871
INFO:tensorflow:got sessions! 2016-08-10 09:44:10.627776 
INFO:tensorflow:Started 3 queues for processing input data.
INFO:tensorflow:global_step/sec: 0
W tensorflow/core/common_runtime/bfc_allocator.cc:213] Ran out of memory trying to allocate 325.69MiB. The caller indicates that this is not a failure, but may mean that there could be performance gains if more memory is available.
I tensorflow/core/common_runtime/gpu/pool_allocator.cc:244] PoolAllocator: After 3869 get requests, put_count=2852 evicted_count=1000 eviction_rate=0.350631 and unsatisfied allocation rate=0.54717
I tensorflow/core/common_runtime/gpu/pool_allocator.cc:256] Raising pool_size_limit_ from 100 to 110
INFO:tensorflow:Step: 7871, Loss: 9.994864, time: 20.625 sec/batch
INFO:tensorflow:Step: 7872, Loss: 9.940327, time: 10.362 sec/batch
INFO:tensorflow:Step: 7872, Loss: 9.524208, time: 3.500 sec/batch
INFO:tensorflow:Step: 7873, Loss: 8.896052, time: 4.684 sec/batch
INFO:tensorflow:Step: 7873, Loss: 9.652542, time: 6.640 sec/batch
I tensorflow/core/common_runtime/gpu/pool_allocator.cc:244] PoolAllocator: After 0 get requests, put_count=1016 evicted_count=1000 eviction_rate=0.984252 and unsatisfied allocation rate=0
INFO:tensorflow:Step: 7874, Loss: 9.589849, time: 6.967 sec/batch
INFO:tensorflow:Step: 7874, Loss: 9.154295, time: 9.189 sec/batch
INFO:tensorflow:Step: 7875, Loss: 8.536239, time: 5.557 sec/batch
INFO:tensorflow:Step: 7875, Loss: 9.060028, time: 8.861 sec/batch
INFO:tensorflow:Step: 7876, Loss: 9.371896, time: 13.704 sec/batch
INFO:tensorflow:Step: 7877, Loss: 8.860212, time: 11.568 sec/batch
I tensorflow/core/common_runtime/gpu/pool_allocator.cc:244] PoolAllocator: After 3768 get requests, put_count=4058 evicted_count=2000 eviction_rate=0.492854 and unsatisfied allocation rate=0.460456
I tensorflow/core/common_runtime/gpu/pool_allocator.cc:256] Raising pool_size_limit_ from 281 to 309
INFO:tensorflow:global_step/sec: 0.0576494
INFO:tensorflow:Step: 7878, Loss: 9.299506, time: 10.376 sec/batch
INFO:tensorflow:Step: 7879, Loss: 9.757480, time: 10.776 sec/batch
INFO:tensorflow:Step: 7880, Loss: 9.546899, time: 12.390 sec/batch
INFO:tensorflow:Step: 7881, Loss: 9.294509, time: 13.112 sec/batch
INFO:tensorflow:Step: 7882, Loss: 8.869230, time: 12.038 sec/batch
INFO:tensorflow:Step: 7883, Loss: 9.540960, time: 11.546 sec/batch
I tensorflow/core/common_runtime/gpu/pool_allocator.cc:244] PoolAllocator: After 0 get requests, put_count=1049 evicted_count=1000 eviction_rate=0.953289 and unsatisfied allocation rate=0
INFO:tensorflow:Step: 7884, Loss: 9.478781, time: 11.588 sec/batch
INFO:tensorflow:Step: 7885, Loss: 9.657397, time: 11.649 sec/batch
INFO:tensorflow:Step: 7886, Loss: 8.369030, time: 14.055 sec/batch
INFO:tensorflow:Step: 7887, Loss: 9.131870, time: 13.443 sec/batch
INFO:tensorflow:global_step/sec: 0.0816636
INFO:tensorflow:Step: 7888, Loss: 9.619063, time: 15.831 sec/batch
INFO:tensorflow:Step: 7889, Loss: 8.693767, time: 12.114 sec/batch
INFO:tensorflow:Step: 7890, Loss: 8.959504, time: 12.134 sec/batch
INFO:tensorflow:Step: 7891, Loss: 9.362369, time: 10.994 sec/batch
INFO:tensorflow:Step: 7892, Loss: 8.754156, time: 13.241 sec/batch
I tensorflow/core/common_runtime/gpu/pool_allocator.cc:244] PoolAllocator: After 3768 get requests, put_count=4016 evicted_count=1000 eviction_rate=0.249004 and unsatisfied allocation rate=0.227442
I tensorflow/core/common_runtime/gpu/pool_allocator.cc:256] Raising pool_size_limit_ from 1158 to 1273
INFO:tensorflow:Step: 7893, Loss: 8.984041, time: 12.548 sec/batch
INFO:tensorflow:Step: 7894, Loss: 8.326893, time: 14.286 sec/batch
INFO:tensorflow:Step: 7895, Loss: 9.283901, time: 11.221 sec/batch
INFO:tensorflow:Step: 7896, Loss: 9.628054, time: 13.308 sec/batch
INFO:tensorflow:global_step/sec: 0.0781111
INFO:tensorflow:Step: 7897, Loss: 8.368325, time: 11.003 sec/batch
INFO:tensorflow:Step: 7898, Loss: 9.902365, time: 12.129 sec/batch
INFO:tensorflow:Step: 7899, Loss: 8.177084, time: 14.468 sec/batch
INFO:tensorflow:Step: 7900, Loss: 8.552169, time: 13.285 sec/batch
INFO:tensorflow:Step: 7901, Loss: 8.842196, time: 12.906 sec/batch
INFO:tensorflow:Step: 7902, Loss: 9.117745, time: 11.627 sec/batch
INFO:tensorflow:Step: 7903, Loss: 9.512599, time: 12.263 sec/batch
INFO:tensorflow:Step: 7904, Loss: 10.199412, time: 11.294 sec/batch
INFO:tensorflow:Step: 7905, Loss: 9.524583, time: 11.076 sec/batch
INFO:tensorflow:Step: 7906, Loss: 9.046996, time: 12.409 sec/batch
INFO:tensorflow:global_step/sec: 0.0819392
INFO:tensorflow:Step: 7907, Loss: 9.589643, time: 13.264 sec/batch
INFO:tensorflow:Step: 7908, Loss: 8.428372, time: 13.708 sec/batch
INFO:tensorflow:Step: 7909, Loss: 9.467053, time: 12.586 sec/batch
INFO:tensorflow:Step: 7910, Loss: 8.079640, time: 11.594 sec/batch
INFO:tensorflow:Step: 7911, Loss: 9.677042, time: 13.855 sec/batch
INFO:tensorflow:Step: 7912, Loss: 8.898677, time: 12.206 sec/batch
INFO:tensorflow:Step: 7913, Loss: 9.999939, time: 13.225 sec/batch
INFO:tensorflow:Step: 7914, Loss: 9.154626, time: 13.241 sec/batch
INFO:tensorflow:Step: 7915, Loss: 9.174578, time: 12.708 sec/batch
INFO:tensorflow:global_step/sec: 0.0762947
INFO:tensorflow:Step: 7916, Loss: 8.732230, time: 11.103 sec/batch
INFO:tensorflow:Step: 7917, Loss: 8.425484, time: 11.082 sec/batch
INFO:tensorflow:Step: 7918, Loss: 8.897883, time: 11.430 sec/batch
INFO:tensorflow:Step: 7919, Loss: 8.891023, time: 13.244 sec/batch
INFO:tensorflow:Step: 7920, Loss: 9.305264, time: 12.623 sec/batch
INFO:tensorflow:Step: 7921, Loss: 10.265774, time: 12.295 sec/batch
INFO:tensorflow:Step: 7922, Loss: 7.939346, time: 12.200 sec/batch
INFO:tensorflow:Step: 7923, Loss: 8.784402, time: 10.772 sec/batch
INFO:tensorflow:Step: 7924, Loss: 8.167378, time: 13.465 sec/batch
INFO:tensorflow:Step: 7925, Loss: 9.491014, time: 12.223 sec/batch
INFO:tensorflow:global_step/sec: 0.0833335
INFO:tensorflow:Step: 7926, Loss: 8.839946, time: 11.815 sec/batch
INFO:tensorflow:Step: 7927, Loss: 9.680555, time: 14.189 sec/batch
INFO:tensorflow:Step: 7928, Loss: 8.420359, time: 10.751 sec/batch
INFO:tensorflow:Step: 7929, Loss: 8.987770, time: 11.278 sec/batch
INFO:tensorflow:Step: 7930, Loss: 9.815159, time: 12.289 sec/batch
INFO:tensorflow:Step: 7931, Loss: 9.461514, time: 11.750 sec/batch
INFO:tensorflow:Step: 7932, Loss: 9.411557, time: 13.917 sec/batch
INFO:tensorflow:Step: 7933, Loss: 8.846165, time: 12.107 sec/batch
INFO:tensorflow:Step: 7934, Loss: 8.749550, time: 11.280 sec/batch
INFO:tensorflow:Step: 7935, Loss: 9.480415, time: 14.734 sec/batch
INFO:tensorflow:global_step/sec: 0.0816705
INFO:tensorflow:Step: 7936, Loss: 8.982031, time: 10.792 sec/batch
INFO:tensorflow:Step: 7937, Loss: 9.615602, time: 12.176 sec/batch
INFO:tensorflow:Step: 7938, Loss: 10.077497, time: 11.241 sec/batch
INFO:tensorflow:Step: 7939, Loss: 8.752743, time: 12.930 sec/batch
INFO:tensorflow:Step: 7940, Loss: 8.296233, time: 13.282 sec/batch
INFO:tensorflow:Step: 7941, Loss: 9.477712, time: 13.736 sec/batch
INFO:tensorflow:Step: 7942, Loss: 9.266421, time: 11.909 sec/batch
INFO:tensorflow:Step: 7943, Loss: 8.418290, time: 11.523 sec/batch
INFO:tensorflow:Step: 7944, Loss: 8.901711, time: 13.867 sec/batch
INFO:tensorflow:global_step/sec: 0.0765582
INFO:tensorflow:Step: 7945, Loss: 9.303470, time: 12.496 sec/batch
INFO:tensorflow:Step: 7946, Loss: 9.756967, time: 12.056 sec/batch
INFO:tensorflow:Step: 7947, Loss: 9.846468, time: 11.041 sec/batch
INFO:tensorflow:Step: 7948, Loss: 8.950992, time: 12.040 sec/batch
INFO:tensorflow:Step: 7949, Loss: 8.611795, time: 12.865 sec/batch
INFO:tensorflow:Step: 7950, Loss: 8.587157, time: 11.865 sec/batch
INFO:tensorflow:Step: 7951, Loss: 8.538968, time: 11.770 sec/batch
INFO:tensorflow:Step: 7952, Loss: 8.796610, time: 12.281 sec/batch
INFO:tensorflow:Step: 7953, Loss: 9.157135, time: 11.655 sec/batch
INFO:tensorflow:Step: 7954, Loss: 9.250380, time: 14.934 sec/batch
INFO:tensorflow:global_step/sec: 0.0833374
INFO:tensorflow:Step: 7955, Loss: 8.864758, time: 11.106 sec/batch
INFO:tensorflow:Step: 7956, Loss: 8.348335, time: 11.216 sec/batch
INFO:tensorflow:Step: 7957, Loss: 8.854444, time: 11.897 sec/batch
run-expr-aws-32node.sh: line 25: 121884 Terminated              CUDA_VISIBLE_DEVICES=$1 bazel-bin/inception/imagenet_distributed_train --batch_size=32 --data_dir=/imagenet/ilsvrc12_train_tfrecord_32_PARTITION/32P_p$2 --job_name='worker' --task_id=$2 --ps_hosts='master:2200' --worker_hosts='master:2201,master:2202,master:2203,master:2204,node001:2205,node001:2206,node001:2207,node001:2208,node002:2209,node002:2210,node002:2211,node002:2212,node003:2213,node003:2214,node003:2215,node003:2216,node004:2217,node004:2218,node004:2219,node004:2220,node005:2221,node005:2222,node005:2223,node005:2224,node006:2225,node006:2226,node006:2227,node006:2228,node007:2229,node007:2230,node007:2231,node007:2232' --initial_learning_rate=$3 --momentum=$4 --sync=True --compute_groups=$5
